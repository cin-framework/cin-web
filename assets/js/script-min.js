/**
 * CIN Framework JavaScript Core
 * @package CIN Framework
 * @author Mawi Man
 * @license Proprietary - All rights reserved to Ayoub Alarjani
 */
let cinTranslations={},cinCurrentLang="en";function getCachedTranslations(e){try{const t=localStorage.getItem(`cin_translations_${e}`);if(t){return JSON.parse(t)}}catch(e){}return null}function cacheTranslations(e,t){try{localStorage.setItem(`cin_translations_${e}`,JSON.stringify(t))}catch(e){}}function isCacheValid(e,t){const n=getCachedTranslations(e);return n&&n.v===t}async function loadTranslations(e="en"){try{const t=await fetch(`./lang/${e}-min.json`),n=await t.json();if(isCacheValid(e,n.v)){const t=getCachedTranslations(e);return cinTranslations[e]=t[e],t}return cacheTranslations(e,n),cinTranslations[e]=n[e],n}catch(t){const n=getCachedTranslations(e);return n&&n[e]?(cinTranslations[e]=n[e],n):{}}}async function loadAllTranslations(){const e=["en","ar"].map((e=>loadTranslations(e)));try{await Promise.all(e)}catch(e){}}async function setLanguage(e){cinCurrentLang=e;const t=document.documentElement;try{localStorage.setItem("cin_preferred_language",e)}catch(e){}"ar"===e?(t.setAttribute("dir","rtl"),t.setAttribute("lang","ar")):(t.setAttribute("dir","ltr"),t.setAttribute("lang","en")),document.querySelectorAll(".cin-lang-btn").forEach((e=>{e.classList.remove("active")}));const n=document.querySelector(`[onclick="setLanguage('${e}')"]`);n&&n.classList.add("active"),cinTranslations[e]||await loadTranslations(e),updateTranslations();const a=document.querySelector(".cin-main");a&&(a.classList.add("cin-fade-in"),setTimeout((()=>{a.classList.remove("cin-fade-in")}),600))}function updateTranslations(){cinTranslations[cinCurrentLang]&&(document.querySelectorAll("[data-translate]").forEach((e=>{const t=e.getAttribute("data-translate");cinTranslations[cinCurrentLang]&&cinTranslations[cinCurrentLang][t]&&(e.textContent=cinTranslations[cinCurrentLang][t])})),document.querySelectorAll("[data-translate-placeholder]").forEach((e=>{const t=e.getAttribute("data-translate-placeholder");cinTranslations[cinCurrentLang]&&cinTranslations[cinCurrentLang][t]&&e.setAttribute("placeholder",cinTranslations[cinCurrentLang][t])})))}function toggleSidebar(){const e=document.getElementById("sidebar");e&&e.classList.toggle("open")}function openModal(){const e=document.getElementById("modalOverlay");e&&e.classList.add("open")}function closeModal(){const e=document.getElementById("modalOverlay");e&&e.classList.remove("open")}function handleEmailSubmit(e){e.preventDefault();const t=e.target.querySelector(".cin-input").value,n=document.getElementById("subscriptionMessage");n&&(n.textContent="ar"===cinCurrentLang?`شكراً! تم تسجيل بريدك الإلكتروني: ${t}`:`Thank you! Your email has been registered: ${t}`,n.style.display="block",setTimeout((()=>{n.style.display="none"}),5e3)),e.target.reset()}function copyCode(e){const t=e.closest(".cin-code-block").querySelector("code").textContent,n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select();try{const t=document.execCommand("copy")?"Copied!":"Failed to copy!";e.textContent=t,setTimeout((()=>{e.textContent="Copy"}),2e3)}catch(t){e.textContent="Error!",setTimeout((()=>{e.textContent="Copy"}),2e3)}document.body.removeChild(n)}function updateQuantity(e,t){const n=e.parentNode.querySelector(".cin-cart-quantity-value");let a=parseInt(n.textContent)+t;a<0&&(a=0),n.textContent=a}function scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}function toggleAccordion(e){const t=e.closest(".cin-accordion-item").querySelector(".cin-accordion-content");e.classList.toggle("active"),t.classList.contains("open")?(t.style.maxHeight=null,t.classList.remove("open")):(t.style.maxHeight="9999px",t.classList.add("open"))}let slideIndex=1;function showSlides(e){let t;const n=document.getElementsByClassName("cin-carousel-item"),a=document.getElementsByClassName("cin-carousel-indicator");for(e>n.length&&(slideIndex=1),e<1&&(slideIndex=n.length),t=0;t<n.length;t++)n[t].style.transform=`translateX(-${100*(slideIndex-1)}%)`,n[t].classList.remove("active");for(t=0;t<a.length;t++)a[t].classList.remove("active");n[slideIndex-1]&&n[slideIndex-1].classList.add("active"),a[slideIndex-1]&&a[slideIndex-1].classList.add("active")}function nextSlide(){showSlides(slideIndex+=1)}function prevSlide(){showSlides(slideIndex-=1)}function currentSlide(e){showSlides(slideIndex=e)}function toggleCollapse(e){const t=e.nextElementSibling;t.style.maxHeight?(t.style.maxHeight=null,t.classList.remove("open")):(t.style.maxHeight="9999px",t.classList.add("open"))}function toggleDropdown(e){e.nextElementSibling.classList.toggle("show")}function getSavedLanguage(){try{const e=localStorage.getItem("cin_preferred_language");return e&&["en","ar"].includes(e)?e:"en"}catch(e){return"en"}}window.onclick=function(e){if(!e.target.matches(".cin-btn")){const e=document.getElementsByClassName("cin-dropdown-content");for(let t=0;t<e.length;t++){const n=e[t];n.classList.contains("show")&&n.classList.remove("show")}}},document.addEventListener("click",(function(e){const t=document.getElementById("sidebar"),n=document.querySelector(".cin-menu-toggle");window.innerWidth<=768&&t&&n&&!t.contains(e.target)&&!n.contains(e.target)&&t.classList.contains("open")&&t.classList.remove("open")})),window.addEventListener("resize",(function(){const e=document.getElementById("sidebar");e&&window.innerWidth>768&&e.classList.remove("open"),showSlides(slideIndex)})),document.addEventListener("DOMContentLoaded",(async function(){await loadAllTranslations();const e=getSavedLanguage();await setLanguage(e);document.querySelectorAll(".cin-card-feature").forEach(((e,t)=>{e.style.animationDelay=.1*t+"s"}));const t=document.getElementById("loadingScreen");t&&t.classList.add("hidden"),showSlides(slideIndex),"undefined"!=typeof Prism&&Prism.plugins.autoloader}));const CinFramework={theme:{setDarkMode:()=>{document.body.classList.add("cin-dark")},setLightMode:()=>{document.body.classList.remove("cin-dark")}},utils:{addClass:(e,t)=>{e.classList.add(t)},removeClass:(e,t)=>{e.classList.remove(t)},toggleClass:(e,t)=>{e.classList.toggle(t)}}};window.CinFramework=CinFramework;