/**
         * Advanced HTML Compressor
         * @package CIN Framework
         * @author Mawi Man
         * @license Proprietary - All rights reserved to Ayoub Alarjani
         */
const htmlInput=document.getElementById("htmlInput"),htmlOutput=document.getElementById("htmlOutput"),compressBtn=document.getElementById("compressBtn"),formatBtn=document.getElementById("formatBtn"),copyBtn=document.getElementById("copyBtn"),inputStats=document.getElementById("inputStats"),outputStats=document.getElementById("outputStats"),compressionRatio=document.getElementById("compressionRatio");function advancedHTMLCompress(t){if(!t||"string"!=typeof t)return"";let e=t;e=e.replace(/<!--(?!\[if).*?-->/gs,""),e=e.replace(/>\s+</g,"><"),e=e.trim(),e=e.replace(/<([^>]+)>/g,((t,e)=>`<${e.replace(/\s+/g," ").trim()}>`)),e=e.replace(/\n\s*\n/g,"\n"),e=e.replace(/^\s+|\s+$/gm,""),e=e.replace(/style\s*=\s*["']([^"']*)["']/gi,((t,e)=>`style="${e.replace(/\s*;\s*/g,";").replace(/\s*:\s*/g,":").replace(/;$/,"").trim()}"`)),e=e.replace(/\s([a-zA-Z-]+)\s*=\s*["']([a-zA-Z0-9-_]+)["']/g," $1=$2");return["li","dt","dd","p","rt","rp","optgroup","option","colgroup","thead","tbody","tfoot","tr","td","th"].forEach((t=>{const o=new RegExp(`</${t}>s*<(?!/${t.split("").join("[^>]*")}|$)`,"gi");e=e.replace(o,"<")})),e}function formatHTMLCode(t){if(!t||"string"!=typeof t)return"";let e=0;const o=t.split(/(<[^>]*>)/);let s="";for(let t=0;t<o.length;t++){const n=o[t].trim();if(n)if(n.startsWith("<"))if(n.startsWith("</"))e=Math.max(0,e-2),s+=" ".repeat(e)+n+"\n";else if(n.endsWith("/>"))s+=" ".repeat(e)+n+"\n";else{s+=" ".repeat(e)+n+"\n";const t=n.match(/<([a-zA-Z0-9]+)/)?.[1]?.toLowerCase(),o=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];t&&!o.includes(t)&&(e+=2)}else n.length>0&&(s+=" ".repeat(e)+n+"\n")}return s.trim()}function compressHTML(){const t=htmlInput.value;if(t.trim())try{compressBtn.disabled=!0,compressBtn.textContent="Compressing...",setTimeout((()=>{const e=advancedHTMLCompress(t);htmlOutput.value=e,copyBtn.disabled=!1;const o=t.length,s=e.length,n=((o-s)/o*100).toFixed(1);outputStats.textContent=`${s.toLocaleString()} characters`,compressionRatio.textContent=`${n}% smaller`,showMessage("HTML compressed successfully!","success"),compressBtn.disabled=!1,compressBtn.textContent="Compress HTML"}),100)}catch(t){showMessage("Error compressing HTML code.","error"),compressBtn.disabled=!1,compressBtn.textContent="Compress HTML"}else showMessage("Please enter HTML code to compress.","error")}function formatHTML(){const t=htmlInput.value;if(t.trim())try{formatBtn.disabled=!0,formatBtn.textContent="Formatting...",setTimeout((()=>{const e=formatHTMLCode(t);htmlOutput.value=e,copyBtn.disabled=!1;const o=t.length,s=e.length,n=((s-o)/o*100).toFixed(1);outputStats.textContent=`${s.toLocaleString()} characters`,compressionRatio.textContent=n>0?`${n}% larger`:`${Math.abs(n)}% smaller`,showMessage("HTML formatted successfully!","success"),formatBtn.disabled=!1,formatBtn.textContent="Format HTML"}),100)}catch(t){showMessage("Error formatting HTML code.","error"),formatBtn.disabled=!1,formatBtn.textContent="Format HTML"}else showMessage("Please enter HTML code to format.","error")}function copyCompressed(){htmlOutput.value?navigator.clipboard.writeText(htmlOutput.value).then((()=>{showMessage("Code copied successfully!","success"),copyBtn.textContent="Copied!",setTimeout((()=>{copyBtn.textContent="Copy"}),2e3)})).catch((()=>{showMessage("Failed to copy code.","error")})):showMessage("No processed code to copy.","error")}function clearInput(){htmlInput.value="",htmlOutput.value="",copyBtn.disabled=!0,inputStats.textContent="0 characters",outputStats.textContent="0 characters",compressionRatio.textContent=""}function showMessage(t,e="info"){let o=document.getElementById("compressionMessage");o||(o=document.createElement("div"),o.id="compressionMessage",o.className="cin-alert cin-mt-4",document.querySelector(".cin-card").appendChild(o)),o.className=`cin-alert cin-alert-${e} cin-mt-4`,o.textContent=t,o.style.display="block",setTimeout((()=>{o.style.display="none"}),3e3)}function scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}htmlInput.addEventListener("input",(()=>{const t=htmlInput.value.length;inputStats.textContent=`${t.toLocaleString()} characters`})),window.addEventListener("load",(()=>{document.getElementById("loadingScreen").style.display="none"})),document.addEventListener("keydown",(t=>{if(t.ctrlKey||t.metaKey)switch(t.key){case"Enter":t.preventDefault(),compressHTML();break;case"r":t.preventDefault(),clearInput();break;case"f":t.preventDefault(),formatHTML();break}})),window.onload=()=>{const t=location.pathname.split("/").pop().replace(".html","");window.parent.postMessage({page:t},"*")};